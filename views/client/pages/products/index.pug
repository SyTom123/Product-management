extends ../../layouts/default.pug 
include ../../mixins/box-head.pug
include ../../mixins/go-back.pug
block main 
    .container
        .row 
            .col-12   
                +box-head(pageTitle)
        .row 
            .col-12 
                div(class="product-sort")
                    span(class="product-sort-text") Sắp xếp theo
                    div(class=`product-sort-item` button-sort data-sort="viewed-desc") Xem nhiều nhất
                    div(class="product-sort-item" button-sort data-sort= "position-desc") Mới nhất
                    div(class="product-sort-item" button-sort data-sort= "featured-1") Nổi bật
                    div(class="product-sort-item" button-sort data-sort= "discountPercentage-desc") Giảm giá nhiều
                    div(class="product-sort-price")
                        span Giá
                        <i class="fa-solid fa-chevron-down"></i>
                        div(class="product-sort-price-sub-items") 
                            div(class="product-sort-price-sub-item" button-sort data-sort="price-asc") Giá từ thấp đến cao
                            div(class="product-sort-price-sub-item" button-sort data-sort="price-desc") Giá từ cao đến thấp


        .row 
            each item in products 
                .col-3.mb-3 
                    a(class="product-item" href=`/products/detail/${item.slug}`)
                        div(class="product-item__img")
                            img(src=item.thumbnail, alt=item.title)
                        h4(class="product-item__name") #{item.title}
                        div(class="product-item__price")
                            span(class="product-item__price-old") #{item.priceOld}
                            span(class="product-item__price-current") #{item.priceNewFormatVND} 
                        if(item.featured == "1")
                            div(class="product-item__featured")
                                <i class="fa-solid fa-check"></i>
                                span Nổi bật
                        div(class="product-item__sale-off")
                            span(class="product-item__percent") #{item.discountPercentage} %
                            span(class="product-item__sale-off-label") GIẢM
                        div(class="product-item-line")
        .row 
            .col-12 
                if(pagination)
                    div(class="pagination product-pagination-wrap")
                        div(class=`product-pagination` )
                            div(class=`page-item ${pagination.currentPage == 1 ? "disabled": ""}`)
                                button(
                                    class="page-link product-pagination-icon "
                                    button-pagination = pagination.currentPage - 1
                                    )
                                        <i class="fa-solid fa-chevron-left"></i>
                            -for(var i = 1; i <= pagination.totalPage; i++)
                                div(class=` product-pagination-item ${i == pagination.currentPage ? "active": ""}`)
                                    button(
                                        button-pagination= i
                                        style="display: inline-block; padding: 8px"
                                        ) #{i}
                            div(class=`page-item ${pagination.currentPage == pagination.totalPage    ? "disabled": ""}`)
                                button(
                                    class="page-link product-pagination-icon "
                                    button-pagination = pagination.currentPage + 1
                                    )
                                    <i class="fa-solid fa-chevron-right"></i>
